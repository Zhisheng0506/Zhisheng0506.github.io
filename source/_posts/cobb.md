---
title: cobb编码推导
date: 2025-11-22 16:07:39
tags:
  - cobb
  - obb
---

​	作者为了解决obb领域的不连续问题，提出了一种全新的obb表达方式，在传统的五维表示方法上修改成了九维表示

## 推导九维表达 (xc, yc, w, h, rs, s0, s1, s2, s3)

cobb的核心思想是利用obb与外界hbb的面积之比来确定obb的唯一性。那么起初我们就可以用五个变量来确定，(x,y,w,h,ra)   其中前四个都是HBB的参数而非obb的参数，ra则代表hbb中obb所占的面积之比。



但是问题也很显而易见，单纯靠这五个参数是无法固定唯一的obb的，同时解码回到obb也是个复杂的事情。

为此，作者又一次引入了rs（滑动比率）这一新参数，由rs来间接估计得到ra。

rs的数学定义如下:

![res](/img/rs.png)



**为什么不选择ra而是选择新引入一个rs变量?**

如果真的就用四维hbb+ra的组合  那么仅仅靠面积比来计算和恢复obb框是一个很复杂的事情，复杂的计算的过程很容易导致精度的损失。然而rs不仅很好计算，而且与ra再数学上有着严格的递增关系，所以rs即保留了连续性理论的证明，又可以简化运算





## 解码模糊性问题

我们现在已经敲定用rs  那么就是（x,y,w,h,rs)五维来表示。但是同样的参数组合，我们其实是可以得到四种完全不同的obb框的。这就是我们说的解码模糊性，同一套编码对应着不同的答案，模型在训练的过程中就不知道该走向哪个答案，因为四个答案都是对的。 为确保答案的唯一性，我们由引入了四个变量来解决DA（编码模糊性）的问题。

![DA](/img/DA.png)



随后我们就得到了cobb编码的最终形态

### 															(xc, yc, w, h, rs, s0, s1, s2, s3)

